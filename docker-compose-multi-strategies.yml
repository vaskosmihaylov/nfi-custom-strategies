---
# Multi-Strategy FreqTrade Docker Compose Configuration
# This file sets up multiple FreqTrade containers for different strategies

x-common-settings:
  &common-settings
  image: freqtradeorg/freqtrade:stable
  build:
    context: .
    dockerfile: "./docker/Dockerfile.custom"
  restart: unless-stopped
  volumes:
    - "./user_data:/freqtrade/user_data"
    - "./user_data/data:/freqtrade/user_data/data"
    - "./configs:/freqtrade/configs"
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:8080"]
    interval: 1m30s
    timeout: 10s
    retries: 3
    start_period: 40s
    start_interval: 5s

services:
  # NostalgiaForInfinityX6 Strategy
  freqtrade-nfi-x7:
    <<: *common-settings
    container_name: freqtrade-nfi-x7
    ports:
      - "127.0.0.1:8080:8080"
    env_file:
      - path: ./env-files/nfi-x7.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/nfi-x7-tradesv3.sqlite
      --log-file user_data/logs/nfi-x7.log
      --strategy-path user_data/strategies/nfi
      --strategy NostalgiaForInfinityX7

  # BandtasticFiboHyper Strategy (Combined - best of opt314 + opt490)
  freqtrade-bandtastic:
    <<: *common-settings
    container_name: freqtrade-bandtastic
    ports:
      - "127.0.0.1:8082:8080"
    env_file:
      - path: ./env-files/bandtastic.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/bandtastic-tradesv3.sqlite
      --log-file user_data/logs/bandtastic.log
      --strategy-path user_data/strategies/BandtasticFiboHyper
      --strategy BandtasticFiboHyper_Combined

  # FVGAdvancedStrategy_V2 Strategy
  freqtrade-fvg:
    <<: *common-settings
    container_name: freqtrade-fvg
    ports:
      - "127.0.0.1:8085:8080"
    env_file:
      - path: ./env-files/fvg.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/fvg-tradesv3.sqlite
      --log-file user_data/logs/fvg.log
      --strategy-path user_data/strategies/FVGAdvancedStrategy_V2
      --strategy FVGAdvancedStrategy_V2

  # MacheteV8b Strategy
  freqtrade-machetev8b:
    <<: *common-settings
    container_name: freqtrade-machetev8b
    ports:
      - "127.0.0.1:8090:8080"
    env_file:
      - path: ./env-files/machetev8b.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/machetev8b-tradesv3.sqlite
      --log-file user_data/logs/machetev8b.log
      --strategy-path user_data/strategies/MacheteV8b
      --strategy MacheteV8b

  # ElliotV5_SMA Strategy
  freqtrade-elliotv5_sma:
    <<: *common-settings
    container_name: freqtrade-elliotv5_sma
    ports:
      - "127.0.0.1:8091:8080"
    env_file:
      - path: ./env-files/elliotv5_sma.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/elliotv5_sma-tradesv3.sqlite
      --log-file user_data/logs/elliotv5_sma.log
      --strategy-path user_data/strategies/ElliotV5_SMA
      --strategy ElliotV5_SMA

  # BinClucMadV1 Strategy
  freqtrade-binclucmadv1:
    <<: *common-settings
    container_name: freqtrade-binclucmadv1
    ports:
      - "127.0.0.1:8092:8080"
    env_file:
      - path: ./env-files/binclucmadv1.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/binclucmadv1-tradesv3.sqlite
      --log-file user_data/logs/binclucmadv1.log
      --strategy-path user_data/strategies/BinClucMadV1
      --strategy BinClucMadV1

  # NASOSv4 Strategy
  freqtrade-nasosv4:
    <<: *common-settings
    container_name: freqtrade-nasosv4
    ports:
      - "127.0.0.1:8093:8080"
    env_file:
      - path: ./env-files/nasosv4.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/nasosv4-tradesv3.sqlite
      --log-file user_data/logs/nasosv4.log
      --strategy-path user_data/strategies/NASOSv4
      --strategy NASOSv4

  # MartyEMA Strategy
  freqtrade-martyema:
    <<: *common-settings
    container_name: freqtrade-martyema
    ports:
      - "127.0.0.1:8094:8080"
    env_file:
      - path: ./env-files/martyema.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/martyema-tradesv3.sqlite
      --log-file user_data/logs/martyema.log
      --strategy-path user_data/strategies/MartyEMA
      --strategy MartyEMA

  # Ichimoku Strategy
  freqtrade-ichimoku:
    <<: *common-settings
    container_name: freqtrade-ichimoku
    ports:
      - "127.0.0.1:8095:8080"
    env_file:
      - path: ./env-files/ichimoku.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/ichimoku-tradesv3.sqlite
      --log-file user_data/logs/ichimoku.log
      --strategy-path user_data/strategies/Icimoku
      --strategy Ichimoku

  # BigWill Strategy
  freqtrade-bigwill:
    <<: *common-settings
    container_name: freqtrade-bigwill
    ports:
      - "127.0.0.1:8096:8080"
    env_file:
      - path: ./env-files/bigwill.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/bigwill-tradesv3.sqlite
      --log-file user_data/logs/bigwill.log
      --strategy-path user_data/strategies/BigWill
      --strategy BigWill

  # ElliotV5_SMA_Shorts Strategy (Shorts-only parallel test)
  freqtrade-elliotv5_sma_shorts:
    <<: *common-settings
    container_name: freqtrade-elliotv5_sma_shorts
    ports:
      - "127.0.0.1:8097:8080"
    env_file:
      - path: ./env-files/elliotv5_sma_shorts.env
        required: true
    command: >
      trade
      --config user_data/strategies/config.json
      --db-url sqlite:////freqtrade/user_data/elliotv5_sma_shorts-tradesv3.sqlite
      --log-file user_data/logs/elliotv5_sma_shorts.log
      --strategy-path user_data/strategies/ElliotV5_SMA
      --strategy ElliotV5_SMA_Shorts

networks:
  default:
    name: freqtrade-network
